{% extends "network/layout.html" %}

{% block body %}
    <main>
        <h1>Welcome Home, {{ request.user }} </h1>
        <div class="flex-wrapper home">
            <section class="post-comment">
                <h2>Post a New Comment</h2>
                <form action="comment" method="POST" id="postForm">
                    {% csrf_token %}
                    <label>
                        <b class="visuallyhidden">Comment</b>
                        <textarea id="postBody" name="body"></textarea>
                    </label>
                    <input type="submit" aria-label="submit comment" Value="Post"/>
                </form>
            </section>
            <section class="feed">
                <h2>All Posts</h2>
                {% for post in posts reversed %}
                    <div class="post">
                        {% if user.id == post.user.id %}
                        <a href="#" class="edit-post"><i class="fa fa-edit"></i> Edit</a>
                        {% endif %}
                        <div class="flex-wrapper">
                            <a class="post-creator" href="#">@{{ post.user }}</a>
                            <span>{{ post.timestamp }}</span>
                        </div>
                        <p id="posted" class="posted">{{ post.body }}</p>
                        <form class="edit-form" id="editForm">
                            {% csrf_token %}
                            <label>
                                <b class="visuallyhidden">Comment</b>
                                <textarea id="editBody" name="body">{{ post.body }}</textarea>
                            </label>
                            <input type="submit" aria-label="submit comment" Value="Submit"/>
                        </form>
                        {% if user.is_authenticated %}
                        <a class="like-post" href="{% url 'like' post.id %}"><i class="fa fa-thumbs-up"></i> Like</a>
                        {% endif %}
                        <span class="no-likes">(# of likes: {{ post.no_likes }})</span>
                    </div>
                {% empty %}
                    <div>
                        No posts found
                    </div>
                {% endfor %}
            </section>
        </div>  
    </main>

{% endblock %}
