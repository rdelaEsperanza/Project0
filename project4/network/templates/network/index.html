{% extends "network/layout.html" %}

{% block body %}
    <main>
        <h1>Welcome Home, {{ request.user }} </h1>
        <div class="flex-wrapper home">
            <section class="post-comment">
                <h2>Post a New Comment</h2>
                <form action="comment" method="POST" id="postForm">
                    {% csrf_token %}
                    <label>
                        <b class="visuallyhidden">Comment</b>
                        <textarea id="postBody" name="body"></textarea>
                    </label>
                    <input type="submit" aria-label="submit comment" Value="Post"/>
                </form>
            </section>
            <section class="feed">
                <h2>All Posts</h2>
                {% for post in posts reversed %}
                    <div class="post">
                        {% if user.id == post.user.id %}
                        <a href="#" class="edit-post"><i class="fa fa-edit"></i> Edit</a>
                        {% endif %}
                        <div class="flex-wrapper">
                            <a class="post-creator" href="{% url 'profile' post.user.id %}">@{{ post.user }}</a>
                            <span>{{ post.timestamp }}</span>
                        </div>
                        <p id="posted" class="posted">{{ post.body }}</p>
                        <form action="edit_comment" method="POST" class="edit-form" id="editForm">
                            {% csrf_token %}
                            <label>
                                <b class="visuallyhidden">Comment</b>
                                <textarea id="editBody" name="body">{{ post.body }}</textarea>
                            </label>
                            <input type="hidden" value="{{ post.id }}" name="post-id" />
                            <input type="submit" aria-label="submit comment" Value="Submit"/>
                        </form>
                        {% if user.is_authenticated %}
                        <a class="like-post" href="{% url 'like' post.id %}"><i class="fa fa-thumbs-up"></i> Like</a>
                        {% endif %}
                        <span class="no-likes">(# of likes: {{ post.no_likes }})</span>
                    </div>
                    <!-- <div class="pagination">
                        <span class="step-links">
                            {% if page_obj.has_previous %}
                                <a href="?page=1">&laquo; first</a>
                                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                            {% endif %}
                    
                            <span class="current">
                                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                            </span>
                    
                            {% if page_obj.has_next %}
                                <a href="?page={{ page_obj.next_page_number }}">next</a>
                                <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                            {% endif %}
                        </span>
                    </div> -->
                {% empty %}
                    <div>
                        No posts found
                    </div>
                {% endfor %}
            </section>
        </div>  
    </main>

{% endblock %}
